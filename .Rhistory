names_to = "race_category",
values_to = "proportion") %>%
filter(!is.na(proportion)) %>%
mutate(race_category = recode(race_category,
ugds_white = "White",
ugds_black = "Black",
ugds_hisp = "Hispanic",
ugds_asian = "Asian",
ugds_aian = "Am Indian/AK Native",
ugds_nhpi = "Native HI/Pac Isl"))
# Reshape demographic data for plotting
# Reshape demographic data for plotting
uo_race_data <- uo_demographics %>%
select(starts_with("ugds_")) %>%
pivot_longer(everything(),
names_to = "race_category",
values_to = "proportion") %>%
filter(!is.na(proportion), proportion > 0) %>%
mutate(race_category = recode(race_category,
ugds_white = "White",
ugds_black = "Black",
ugds_hisp = "Hispanic",
ugds_asian = "Asian",
ugds_aian = "Am Indian/AK Native",
ugds_nhpi = "Native HI/Pac Isl"))
# Create pie chart
ggplot(uo_race_data, aes(x = "", y = proportion, fill = race_category)) +
geom_col(width = 1, color = "white") +
coord_polar("y") +
labs(title = "University of Oregon Student Body by Race/Ethnicity",
fill = "Race/Ethnicity") +
scale_fill_brewer(palette = "Set2") +
theme_void() +
theme(plot.title = element_text(face = "bold", size = 14, hjust = 0.5),
legend.position = "right")
# Get comprehensive UO data
uo_complete <- sc_init() %>%
sc_filter(instnm == "University of Oregon") %>%
sc_select(
# Basic info
instnm, city, stabbr, locale,
# Enrollment
ugds, ugds_women,
# Admissions
adm_rate, sat_avg, actcmmid,
# Costs
costt4_a, tuitionfee_in, tuitionfee_out,
# Aid
pctpell, pctfloan,
# Outcomes
c150_4, ret_ft4, grad_debt_mdn, md_earn_wne_p10
) %>%
sc_year("latest") %>%
sc_get()
# Display the data
kable(uo_complete,
digits = 2,
caption = "Comprehensive University of Oregon Data")
# Create a data directory if it doesn't exist
if (!dir.exists("data")) {
dir.create("data")
}
# Export datasets to CSV
write.csv(uo_trends, "data/uo_trends.csv", row.names = FALSE)
write.csv(oregon_comparison, "data/oregon_universities.csv", row.names = FALSE)
write.csv(pac12, "data/pac12_comparison.csv", row.names = FALSE)
write.csv(uo_demographics, "data/uo_demographics.csv", row.names = FALSE)
write.csv(uo_complete, "data/uo_comprehensive.csv", row.names = FALSE)
cat("Data files saved to the 'data' directory!\n")
blogdown:::preview_site()
ggplot(penguins, aes(x = bill_length_mm)) +
geom_histogram(fill = "#56B4E9",
color = "white",
alpha = 0.9)
library(palmerpenguins)
penguins
ggplot(penguins, aes(x = bill_length_mm)) +
geom_histogram()
ggplot(penguins, aes(x = bill_length_mm)) +
geom_histogram(fill = "#56B4E9",
color = "white",
alpha = 0.9)
ggplot(penguins, aes(x = bill_length_mm)) +
geom_histogram(fill = "#56B4E9",
color = "white",
alpha = 0.9,
bins = 50) #<<
bw5 <- ggplot(penguins, aes(x = bill_length_mm)) +
geom_histogram(fill = "#56B4E9",
color = "white",
alpha = 0.9,
bins = 5) +
ggtitle("bins = 5")
bw25 <- ggplot(penguins, aes(x = bill_length_mm)) +
geom_histogram(fill = "#56B4E9",
color = "white",
alpha = 0.9,
bins = 25) +
ggtitle("bins = 25")
bw50 <- ggplot(penguins, aes(x = bill_length_mm)) +
geom_histogram(fill = "#56B4E9",
color = "white",
alpha = 0.9,
bins = 50) +
ggtitle("bins = 50")
library(patchwork)
bw5 + bw25 + bw50
ggplot(penguins, aes(bill_length_mm)) +
geom_density()
ggplot(penguins, aes(bill_length_mm)) +
geom_density(fill = "#56B4E9")
ggplot(penguins, aes(bill_length_mm)) +
geom_density(fill = "#56B4E9",
bw = 5)
bw.5 <- ggplot(penguins, aes(bill_length_mm)) +
geom_density(fill = "#56B4E9",
bw = .5) +
ggtitle("bw = .5")
bw2 <- ggplot(penguins, aes(bill_length_mm)) +
geom_density(fill = "#56B4E9",
bw = 2) +
ggtitle("bw = 2")
bw5 <- ggplot(penguins, aes(bill_length_mm)) +
geom_density(fill = "#56B4E9",
bw = 5) +
ggtitle("bw = 5")
bw10 <- ggplot(penguins, aes(bill_length_mm)) +
geom_density(fill = "#56B4E9",
bw = 10) +
ggtitle("bw = 10")
(bw.5 + bw2) / (bw5 + bw10)
ggplot(penguins, aes(sample = bill_length_mm)) +
stat_qq_line(color = "#56B4E9") +
geom_qq(color = "gray40")
knitr::opts_chunk$set(echo = FALSE)
theme_update(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
legend.position = "none")
ggplot(penguins, aes(island, bill_length_mm)) +
geom_boxplot(fill = "#A9E5C5")
ggplot(penguins, aes(island, bill_length_mm)) +
geom_violin(fill = "#A9E5C5")
ggplot(penguins, aes(island, bill_length_mm)) +
geom_jitter(width = 0.3, height = 0)
ggplot(penguins, aes(island, bill_length_mm)) +
ggforce::geom_sina()
ggplot(penguins, aes(bill_length_mm)) +
geom_histogram(aes(fill = island))
ggplot(penguins, aes(bill_length_mm)) +
geom_histogram(aes(fill = island),
position = "dodge")
ggplot(penguins, aes(bill_length_mm)) +
geom_histogram(fill = "#A9E5C5",
color = "white",
alpha = 0.9,) +
facet_wrap(~island) #<<
ggplot(penguins, aes(bill_length_mm)) +
geom_density(aes(fill = island),
color = "white",
alpha = 0.4)
darken <- function(color, factor = 1.1) {
sapply(color, function(col) {
rgb.val <- col2rgb(col)
rgb(t(pmax(0, pmin(255, rgb.val * factor))), maxColorValue = 255)
})
}
ggplot(penguins, aes(bill_length_mm)) +
geom_density(aes(color = island, fill = island),
alpha = 0.6) +
scale_fill_manual(values = c("#003326", "#009973", "#d6fff5")) +
scale_color_manual(
values = darken(c("#003326", "#009973", "#d6fff5"), .1)
)
ggplot(penguins, aes(bill_length_mm, island)) +
ggridges::geom_density_ridges(color = "white",
fill = "#A9E5C5")
knitr::opts_chunk$set(echo = FALSE)
theme_update(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
legend.position = "none")
knitr::opts_chunk$set(echo = TRUE)
theme_set(theme_minimal(base_size = 25))
library(here)
library(rio)
tuition <- import(here("data", "us_avg_tuition.xlsx"),
setclass = "tbl_df")
head(tuition)
ggplot(tuition, aes(State, `2015-16`)) +
geom_col()
ggplot(tuition, aes(State, `2015-16`)) +
geom_col() +
theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 10))
ggplot(tuition, aes(State, `2015-16`)) +
geom_col() +
coord_flip()
ggplot(tuition, aes(State, `2015-16`)) +
geom_col() +
coord_flip() +
theme(axis.text.y = element_text(size = 13))
ggplot(tuition, aes(fct_reorder(State, `2015-16`), `2015-16`)) +
geom_col() +
coord_flip()
ggplot(tuition, aes(fct_reorder(State, `2015-16`), `2015-16`)) +
geom_col() +
coord_flip() +
theme(axis.text.y = element_text(size = 13))
ggplot(tuition, aes(fct_reorder(State, `2015-16`), `2015-16`)) +
geom_col() +
geom_col(fill = "cornflowerblue",
data = filter(tuition, State == "Oregon")) +
coord_flip()
ggplot(tuition, aes(fct_reorder(State, `2015-16`), `2015-16`)) +
geom_col() +
geom_col(fill = "cornflowerblue",
data = filter(tuition, State == "Oregon")) +
coord_flip() +
theme(axis.text.y = element_text(size = 13))
head(tuition)
tuition %>%
pivot_longer(`2004-05`:`2015-16`,
names_to = "year",
values_to = "avg_tuition")
annual_means <- tuition %>%
pivot_longer(`2004-05`:`2015-16`,
names_to = "year",
values_to = "avg_tuition")  %>%
group_by(year) %>%
summarize(mean_tuition = mean(avg_tuition))
annual_means
ggplot(annual_means, aes(year, mean_tuition)) +
geom_col()
ggplot(annual_means, aes(year, mean_tuition)) +
geom_col() +
theme(axis.text.x = element_text(size = 14))
ggplot(annual_means, aes(year, mean_tuition)) +
geom_col() +
coord_flip()
ggplot(annual_means, aes(year, mean_tuition)) +
geom_point() +
coord_flip()
annual_means %>%
mutate(year = readr::parse_number(year)) %>%
ggplot(aes(year, mean_tuition)) +
geom_line(color = "cornflowerblue") +
geom_point()
tuition %>%
select(State, `2005-06`, `2015-16`)
lt <- tuition %>%
select(State, `2005-06`, `2015-16`) %>%
pivot_longer(`2005-06`:`2015-16`,
names_to = "Year",
values_to = "Tuition")
lt
ggplot(lt, aes(State, Tuition)) +
geom_line(aes(group = State), color = "gray40") +
geom_point(aes(color = Year)) +
coord_flip()
ggplot(lt, aes(State, Tuition)) +
geom_line(aes(group = State), color = "gray40") +
geom_point(aes(color = Year), size = 5) +
coord_flip() +
theme(axis.text.y = element_text(size = 11.5))
tuition_l <- tuition %>%
pivot_longer(-State,
names_to = "year",
values_to = "avg_tuition")
tuition_l
ggplot(tuition_l, aes(year, State)) +
geom_tile(aes(fill = avg_tuition))
# Get UO demographic data
uo_demographics <- sc_init() %>%
sc_filter(unitid == 209551) %>%
sc_select(instnm, ugds, ugds_white, ugds_black,
ugds_hisp, ugds_asian, ugds_aian, ugds_nhpi,
pctpell, par_ed_pct_1stgen) %>%
sc_year("latest") %>%
sc_get()
# Display the data
kable(uo_demographics,
digits = 3,
caption = "University of Oregon Student Demographics",
col.names = c("Institution", "Total Enrollment", "% White",
"% Black", "% Hispanic", "% Asian", "% Am Indian/AK Native",
"% Native HI/Pac Isl", "% Pell Grant",
"% First Gen", "Year"))
# Reshape demographic data for plotting
# Reshape demographic data for plotting
uo_race_data <- uo_demographics %>%
select(starts_with("ugds_")) %>%
pivot_longer(everything(),
names_to = "race_category",
values_to = "proportion") %>%
filter(!is.na(proportion), proportion > 0) %>%
mutate(race_category = recode(race_category,
ugds_white = "White",
ugds_black = "Black",
ugds_hisp = "Hispanic",
ugds_asian = "Asian",
ugds_aian = "Am Indian/AK Native",
ugds_nhpi = "Native HI/Pac Isl"))
# Create pie chart
ggplot(uo_race_data, aes(x = "", y = proportion, fill = race_category)) +
geom_col(width = 1, color = "white") +
coord_polar("y") +
labs(title = "University of Oregon Student Body by Race/Ethnicity",
fill = "Race/Ethnicity") +
scale_fill_brewer(palette = "Set2") +
theme_void() +
theme(plot.title = element_text(face = "bold", size = 14, hjust = 0.5),
legend.position = "right")
# Get comprehensive UO data
uo_complete <- sc_init() %>%
sc_filter(unitid == 209551) %>%
sc_select(
# Basic info
instnm, city, stabbr, locale,
# Enrollment
ugds, ugds_women,
# Admissions
adm_rate, sat_avg, actcmmid,
# Costs
costt4_a, tuitionfee_in, tuitionfee_out,
# Aid
pctpell, pctfloan,
# Outcomes
c150_4, ret_ft4, grad_debt_mdn, md_earn_wne_p10
) %>%
sc_year("latest") %>%
sc_get()
# Display the data
kable(uo_complete,
digits = 2,
caption = "Comprehensive University of Oregon Data")
# Create a data directory if it doesn't exist
if (!dir.exists("data")) {
dir.create("data")
}
# Export datasets to CSV
write.csv(uo_trends, "data/uo_trends.csv", row.names = FALSE)
write.csv(oregon_comparison, "data/oregon_universities.csv", row.names = FALSE)
write.csv(pac12, "data/pac12_comparison.csv", row.names = FALSE)
write.csv(uo_demographics, "data/uo_demographics.csv", row.names = FALSE)
write.csv(uo_complete, "data/uo_comprehensive.csv", row.names = FALSE)
cat("Data files saved to the 'data' directory!\n")
lt <- tuition %>%
select(State, `2005-06`, `2015-16`) %>%
pivot_longer(`2005-06`:`2015-16`,
names_to = "Year",
values_to = "Tuition")
lt
ggplot(tuition_l, aes(year, fct_reorder(State, avg_tuition))) +
geom_tile(aes(fill = avg_tuition)) +
scale_fill_viridis_c(option = "magma")
ggplot(tuition_l, aes(year, fct_reorder(State, avg_tuition))) +
geom_tile(aes(fill = avg_tuition)) +
scale_fill_viridis_c(option = "magma") +
theme_minimal(base_size = 12)
hmap <- ggplot(tuition_l, aes(year, fct_reorder(State, avg_tuition))) +
geom_tile(aes(fill = avg_tuition)) +
scale_fill_viridis_c("Average Tuition Cost\n",
option = "magma",
labels = scales::dollar) +
theme_minimal(base_size = 15) +
theme(
panel.grid.major = element_line(linewidth = 0),
panel.grid.minor = element_line(linewidth = 0),
axis.text.x = element_text(colour = "gray"),
axis.text.y = element_text(colour = "gray"),
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black", color = "black"),
legend.background = element_rect(fill = "black"),
legend.text = element_text(size = 9, colour = "gray"),
legend.position.inside = c(0.65, 1.03),
legend.direction = "horizontal",
legend.title = element_text(colour = "gray"),
legend.key.width = unit(4, "cm"),
plot.margin = margin(1.5, 0, 0, 0, "cm")
)
ggsave(here::here("static", "slides", "img", "heatmapr.png"),
width = 16,
height = 12)
ggplot(tuition, aes(fct_reorder(State, `2015-16`), `2015-16`)) +
geom_col() +
geom_col(fill = "cornflowerblue",
data = filter(tuition, State == "Oregon")) +
coord_flip() +
labs(x = "State",
y = "Tuition (2015-16)")
ggplot(tuition, aes(fct_reorder(State, `2015-16`), `2015-16`)) +
geom_col() +
geom_col(fill = "cornflowerblue",
data = filter(tuition, State == "Oregon")) +
coord_flip() +
labs(x = "State",
y = "Tuition (2015-16)",
title = "State Tuition Comparison") +
theme(axis.text.y = element_text(size = 13))
library(here)
library(rmarkdown)
library(pagedown)
# Make sure required files exist in static/slides/
required_files <- c(
here::here("static", "slides", "load-feather.html"),
here::here("static", "slides", "new.css"),
here::here("static", "slides", "slide-setup.R")
)
missing <- required_files[!file.exists(required_files)]
if (length(missing) > 0) {
stop("Missing required files:\n", paste(missing, collapse = "\n"))
}
# Render the Rmd to HTML
message("Rendering w1.Rmd to HTML...")
rmarkdown::render(here::here("static", "slides", "w2.Rmd"))
# Convert HTML to PDF
message("Converting w1.html to PDF...")
pagedown::chrome_print(here::here("static", "slides", "w2.html"))
message("\nSuccess! PDF created at: static/slides/w2.pdf")
message("\nNext steps:")
message("1. Commit the PDF to your repo")
message("2. Push to GitHub")
message("3. The download link in your slides footer will work at:")
message("   https://github.com/maithgopalan/c2-dataviz-2026/raw/main/static/slides/w2.pdf")
# Get basic UO data - using unitid for exact match
uo_data <- sc_init() %>%
sc_filter(unitid == 209551) %>%  # UO's specific unitid
sc_select(unitid, instnm, stabbr, city, locale) %>%
sc_year("latest") %>%
sc_get()
# Display the data
kable(uo_data, caption = "Basic University of Oregon Information")
# Get UO enrollment and cost data over time
# Need to get each year separately and combine
years_to_get <- 2010:2020
uo_trends <- map_dfr(years_to_get, function(yr) {
sc_init() %>%
sc_filter(unitid == 209551) %>%
sc_select(instnm, ugds, costt4_a, tuitionfee_in, tuitionfee_out) %>%
sc_year(yr) %>%
sc_get()
})
# Convert year to numeric for plotting
uo_trends <- uo_trends %>%
mutate(year_numeric = as.numeric(year))
# Display the data
kable(uo_trends %>% select(-year_numeric),
caption = "University of Oregon Enrollment and Cost Trends (2010-2020)",
col.names = c("Institution", "Total Undergrads", "Avg Cost",
"In-State Tuition", "Out-of-State Tuition", "Year"))
ggplot(uo_trends, aes(x = year, y = ugds)) +
geom_line(size = 1.5, color = "#154733") +  # UO green
geom_point(size = 3, color = "#FEE123") +    # UO yellow
labs(title = "University of Oregon Undergraduate Enrollment Trends",
subtitle = "2010-2020",
x = "Year",
y = "Total Undergraduate Enrollment") +
scale_x_continuous(breaks = 2010:2020) +
scale_y_continuous(labels = scales::comma) +
theme_minimal() +
theme(plot.title = element_text(face = "bold", size = 16),
axis.text.x = element_text(angle = 45, hjust = 1))
blogdown:::preview_site()
library(here)
library(rmarkdown)
library(pagedown)
# Make sure required files exist in static/slides/
required_files <- c(
here::here("static", "slides", "load-feather.html"),
here::here("static", "slides", "new.css"),
here::here("static", "slides", "slide-setup.R")
)
missing <- required_files[!file.exists(required_files)]
if (length(missing) > 0) {
stop("Missing required files:\n", paste(missing, collapse = "\n"))
}
# Render the Rmd to HTML
message("Rendering w1.Rmd to HTML...")
rmarkdown::render(here::here("static", "slides", "w3.Rmd"))
# Convert HTML to PDF
message("Converting w1.html to PDF...")
pagedown::chrome_print(here::here("static", "slides", "w3.html"))
library(here)
library(rmarkdown)
library(pagedown)
# Make sure required files exist in static/slides/
required_files <- c(
here::here("static", "slides", "load-feather.html"),
here::here("static", "slides", "new.css"),
here::here("static", "slides", "slide-setup.R")
)
missing <- required_files[!file.exists(required_files)]
if (length(missing) > 0) {
stop("Missing required files:\n", paste(missing, collapse = "\n"))
}
# Render the Rmd to HTML
message("Rendering w1.Rmd to HTML...")
rmarkdown::render(here::here("static", "slides", "w3.Rmd"))
# Convert HTML to PDF
message("Converting w1.html to PDF...")
pagedown::chrome_print(
here::here("static", "slides", "w3.html"),
timeout = 120  # Increase to 120 seconds (or higher if needed)
)
message("\nSuccess! PDF created at: static/slides/w3.pdf")
message("\nNext steps:")
message("1. Commit the PDF to your repo")
message("2. Push to GitHub")
message("3. The download link in your slides footer will work at:")
message("   https://github.com/maithgopalan/c2-dataviz-2026/raw/main/static/slides/w3.pdf")
